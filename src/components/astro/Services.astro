---
import { Image } from "astro:assets";
import touchOfTechnology from "../../images/touch_of_technology.jpeg";
import futuristicGlasses from "../../images/futuristic_glasses.jpeg";
import developingComputer from "../../images/developing_computer.jpeg";

interface ServicesProps {
  translations?: {
    sections: {
      planning: {
        title: string;
        subtitle: string;
      };
      technical: {
        title: string;
        subtitle: string;
      };
      final: {
        title: string;
        subtitle: string;
      };
    };
    process: {
      initial_meeting: {
        title: string;
        description: string;
        content: string[];
      };
      customer_analysis: {
        title: string;
        description: string;
        content: string[];
      };
      design: {
        title: string;
        description: string;
        content: string[];
      };
      seo: {
        title: string;
        description: string;
        areas: {
          images_and_media: {
            title: string;
            description: string;
          };
          responsiveness: {
            title: string;
            description: string;
          };
          structure: {
            title: string;
            description: string;
          };
          meta_data: {
            title: string;
            description: string;
          };
        };
      };
      development_and_technologies: {
        description: string;
        content: string[];
      };
      accessibility: {
        title: string;
        description: string;
        content: string[];
      };
      testing: {
        title: string;
        description: string;
        additional_info: string[];
      };
      launch: {
        title: string;
        description: string;
        additional_info: string[];
      };
      maintenance: {
        title: string;
        description: string;
        content: string[];
      };
      developmentPhases: {
        title: string;
        frontendDevelopment: {
          title: string;
          description: string;
        };
        contentManagement: {
          title: string;
          description: string;
        };
        hostingAndDeployment: {
          title: string;
          description: string;
        };
        databaseAndDataStorage: {
          title: string;
          description: string;
        };
        ["3dDevelopment"]: {
          title: string;
          description: string;
        };
        summary: string;
      };
      gdprCompliance: {
        gdprComplianceTitle: string;
        dataPrivacyDescription: string;
        analyticsManagement: {
          title: string;
          description: string;
        };
        integrationAndPrivacyNotices: {
          title: string;
          description: string;
        };
      };
    };
    hosting_maintenance_packages: {
      title: string;
      description: string;
      packages: {
        name: string;
        price_per_month: number;
        features: string[];
      }[];
    };
    contactButton: string;
  };
  lang?: string;
}

const {
  translations = {
    sections: {
      planning: { title: "", subtitle: "" },
      technical: { title: "", subtitle: "" },
      final: { title: "", subtitle: "" },
    },
    process: {
      initial_meeting: { title: "", description: "", content: [] },
      customer_analysis: { title: "", description: "", content: [] },
      design: { title: "", description: "", content: [] },
      seo: {
        title: "",
        description: "",
        areas: {
          images_and_media: { title: "", description: "" },
          responsiveness: { title: "", description: "" },
          structure: { title: "", description: "" },
          meta_data: { title: "", description: "" },
        },
      },
      development_and_technologies: { description: "", content: [] },
      accessibility: { title: "", description: "", content: [] },
      testing: { title: "", description: "", additional_info: [] },
      launch: { title: "", description: "", additional_info: [] },
      maintenance: { title: "", description: "", content: [] },
      developmentPhases: {
        title: "",
        frontendDevelopment: { title: "", description: "" },
        contentManagement: { title: "", description: "" },
        hostingAndDeployment: { title: "", description: "" },
        databaseAndDataStorage: { title: "", description: "" },
        ["3dDevelopment"]: { title: "", description: "" },
        summary: "",
      },
      gdprCompliance: {
        gdprComplianceTitle: "",
        dataPrivacyDescription: "",
        analyticsManagement: { title: "", description: "" },
        integrationAndPrivacyNotices: { title: "", description: "" },
      },
    },
    hosting_maintenance_packages: {
      title: "",
      description: "",
      packages: [],
    },
    contactButton: "",
  },
  lang = "en",
}: ServicesProps = Astro.props;
const { sections, process, hosting_maintenance_packages } = translations;
---

<div class="relative">
  <!-- Planning Phase -->
  <section class="bg-black/95 text-white py-16 min-h-[600px] flex items-center">
    <div class="max-w-6xl mx-auto px-4 w-full">
      <div class="text-center mb-16">
        <h2 class="text-3xl font-bold mb-4 text-green-400">{sections?.planning?.title}</h2>
        <p class="text-xl text-gray-300">{sections?.planning?.subtitle}</p>
      </div>

      <div
        class="relative w-full h-[170px] sm:h-[300px] md:h-[400px] mb-16 rounded-xl overflow-hidden"
      >
        <Image
          src={touchOfTechnology}
          alt="Touch of Technology"
          width={1200}
          height={800}
          format="webp"
          quality={80}
          class="w-full h-full object-cover object-center"
        />
        <!--    <div class="absolute inset-0 bg-black/30 backdrop-blur-[2px]"></div> -->
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
        <!-- Initial Meeting & Customer Analysis -->
        <div class="space-y-8">
          <div>
            <h3 class="text-xl font-bold mb-4">{process?.initial_meeting?.title}</h3>
            <p class="text-lg mb-4">{process?.initial_meeting?.description}</p>
            <ul class="list-disc pl-5 space-y-2">
              {process?.initial_meeting?.content?.map((item: any) => <li>{item}</li>)}
            </ul>
          </div>
          <div>
            <h3 class="text-xl font-bold mb-4 text-green-400">
              {process?.customer_analysis?.title}
            </h3>
            <p class="text-lg">{process?.customer_analysis?.description}</p>
          </div>
        </div>
        <!-- Design & Development -->
        <div class="space-y-8">
          <div>
            <h3 class="text-xl font-bold mb-4">{process?.design?.title}</h3>
            <p class="text-lg mb-4">{process?.design?.description}</p>
            <ul class="list-disc pl-5 space-y-2">
              {process?.design?.content?.map((item: any) => <li>{item}</li>)}
            </ul>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Development Phases -->
  <section class="bg-black/95 text-white py-16 min-h-[600px] flex items-center">
    <div class="max-w-6xl mx-auto px-4 w-full">
      <div class="text-center mb-16">
        <h2 class="text-3xl font-bold mb-4 text-green-400">{process?.developmentPhases?.title}</h2>
      </div>
      <div
        class="relative w-full h-[170px] sm:h-[300px] md:h-[400px] mb-16 rounded-xl overflow-hidden"
      >
        <Image
          src={futuristicGlasses}
          alt="Woman with futuristic glasses"
          width={1200}
          height={800}
          format="webp"
          quality={80}
          class="w-full h-full object-cover object-center"
        />
        <!-- <div class="absolute inset-0 bg-black/30 backdrop-blur-[2px]"></div> -->
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
        <!-- Frontend & CMS -->
        <div class="space-y-8">
          {
            ["frontendDevelopment", "contentManagement", "hostingAndDeployment"].map(
              (phase, index) => {
                const phaseData =
                  process?.developmentPhases[phase as keyof typeof process.developmentPhases];
                return (
                  <div
                    class="fade-sequence p-4 bg-gray-900 rounded-lg"
                    style={`--delay: ${index * 200}ms`}
                  >
                    <h3 class="text-xl font-bold mb-4">
                      {typeof phaseData === "object" && phaseData.title}
                    </h3>
                    <p class="text-lg">{typeof phaseData === "object" && phaseData.description}</p>
                  </div>
                );
              },
            )
          }
        </div>

        <!-- Database & 3D -->
        <div class="space-y-8">
          <div>
            <h3 class="text-xl font-bold mb-4">
              {process?.developmentPhases?.databaseAndDataStorage?.title}
            </h3>
            <p class="text-lg mb-4">
              {process?.developmentPhases?.databaseAndDataStorage?.description}
            </p>
          </div>
          <div>
            <h3 class="text-xl font-bold mb-4">
              {process?.developmentPhases?.["3dDevelopment"]?.title}
            </h3>
            <p class="text-lg mb-4">{process?.developmentPhases?.["3dDevelopment"]?.description}</p>
          </div>
          <p class="text-lg text-gray-300">
            {process?.developmentPhases?.summary}
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- GDPR Compliance -->
  <section class="bg-black/95 text-white py-16 min-h-[600px] flex items-center">
    <div class="max-w-6xl mx-auto px-4 w-full">
      <div class="text-center mb-16">
        <h2 class="text-3xl font-bold mb-4 text-green-400">
          {process?.gdprCompliance?.gdprComplianceTitle}
        </h2>
        <p class="text-xl text-gray-300">{process?.gdprCompliance?.dataPrivacyDescription}</p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
        <!-- Analytics Management -->
        <div>
          <h3 class="text-xl font-bold mb-4">
            {process?.gdprCompliance?.analyticsManagement?.title}
          </h3>
          <p class="text-lg mb-4">
            {process?.gdprCompliance?.analyticsManagement?.description}
          </p>
        </div>

        <!-- Integration -->
        <div>
          <h3 class="text-xl font-bold mb-4">
            {process?.gdprCompliance?.integrationAndPrivacyNotices?.title}
          </h3>
          <p class="text-lg mb-4">
            {process?.gdprCompliance?.integrationAndPrivacyNotices?.description}
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Technical Excellence -->
  <section class="bg-black/95 text-white py-16 min-h-[600px] flex items-center">
    <div class="max-w-6xl mx-auto px-4 w-full">
      <div class="text-center mb-16">
        <h2 class="text-3xl font-bold mb-4 text-green-400">{sections?.technical?.title}</h2>
        <p class="text-xl text-gray-300">{sections?.technical?.subtitle}</p>
      </div>

      <div
        class="relative w-full h-[170px] sm:h-[300px] md:h-[400px] mb-16 rounded-xl overflow-hidden"
      >
        <Image
          src={developingComputer}
          alt="Developing on computer"
          width={1200}
          height={800}
          format="webp"
          quality={80}
          class="w-full h-full object-cover object-center"
        />
        <div class="absolute inset-0 bg-black/30 backdrop-blur-[2px]"></div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- SEO -->

        <h3 class="text-2xl font-bold mb-8">{process?.seo?.title}</h3>
        <p class="text-lg mb-6">{process?.seo?.description}</p>
        <div class="space-y-4">
          {
            Object.entries(process?.seo?.areas || {}).map(([key, value]: any, index) => (
              <div
                class="fade-sequence p-4 bg-gray-900 rounded-lg"
                style={`--delay: ${index * 200}ms`}
              >
                <h4 class="font-bold mb-2 capitalize">{value.title}</h4>
                <p>{value.description}</p>
              </div>
            ))
          }
        </div>
        <!-- Accessibility -->
        <div>
          <h3 class="text-2xl font-bold mb-8">{process?.accessibility?.title}</h3>
          <p class="text-lg mb-6">{process?.accessibility?.description}</p>
          <ul class="space-y-3">
            {
              process?.accessibility?.content?.map((item: any) => (
                <li class="flex items-center">
                  <span class="mr-2">•</span>
                  {item}
                </li>
              ))
            }
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- Launch & Beyond -->
  <section class="bg-black/95 text-white py-16 min-h-[600px] flex items-center">
    <div class="max-w-6xl mx-auto px-4 w-full">
      <div class="text-center mb-16">
        <h2 class="text-3xl font-bold mb-4 text-green-400">{sections?.final?.title}</h2>
        <p class="text-xl text-gray-300">{sections?.final?.subtitle}</p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <!-- Testing -->
        <div class="p-6 bg-gray-900 rounded-lg card-fade">
          <h3 class="text-xl font-bold mb-4">{process?.testing?.title}</h3>
          <p class="mb-4">{process?.testing?.description}</p>
          {
            process?.testing?.additional_info?.map((info: any) => (
              <p class="text-gray-300">{info}</p>
            ))
          }
        </div>

        <!-- Launch -->
        <div class="p-6 bg-gray-900 rounded-lg card-fade" style="--delay: 200ms">
          <h3 class="text-xl font-bold mb-4">{process?.launch?.title}</h3>
          <p class="mb-4">{process?.launch?.description}</p>
          <ul class="text-gray-300 space-y-2">
            {process?.launch?.additional_info?.map((info: any) => <li>{info}</li>)}
          </ul>
        </div>

        <!-- Maintenance -->
        <div class="p-6 bg-gray-900 rounded-lg card-fade" style="--delay: 400ms">
          <h3 class="text-xl font-bold mb-4">{process?.maintenance?.title}</h3>
          <p class="mb-4">{process?.maintenance?.description}</p>
          <ul class="text-gray-300">
            {process?.maintenance?.content?.map((item: any) => <li>{item}</li>)}
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- Add after your maintenance section -->
  <section class="bg-black/95 text-white py-16">
    <div class="max-w-6xl mx-auto px-4">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold mb-4">{translations.hosting_maintenance_packages.title}</h2>
        <p class="text-gray-300">{hosting_maintenance_packages.description}</p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        {
          translations.hosting_maintenance_packages.packages.map((pkg) => (
            <div class="bg-gray-900 rounded-lg p-8 transition-transform hover:scale-[1.02]">
              <div class="text-center mb-6">
                <h3 class="text-2xl font-bold text-green-400 mb-2">{pkg.name}</h3>
                <p class="text-3xl font-bold">
                  €{pkg.price_per_month}
                  <span class="text-sm text-gray-400">/month</span>
                </p>
              </div>

              <ul class="space-y-4">
                {pkg.features.map((feature) => (
                  <li class="flex items-start">
                    <svg
                      class="w-5 h-5 text-green-400 mt-1 mr-3 flex-shrink-0"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M5 13l4 4L19 7"
                      />
                    </svg>
                    <span class="text-gray-300">{feature}</span>
                  </li>
                ))}
              </ul>
            </div>
          ))
        }
      </div>

      <!-- Contact Button -->
      <div class="text-center mt-12">
        <a
          href={lang === "fi" ? "/yhteydenotto" : "/en/contact"}
          class="inline-block bg-green-400 text-black px-8 py-3 rounded-full
                 hover:bg-green-300 transition-colors duration-300"
        >
          {translations.contactButton}
        </a>
      </div>
    </div>
  </section>
</div>

<script>
  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.add("show");
      }
    });
  });

  // For fade effects
  document.querySelectorAll(".fade-in").forEach((el) => observer.observe(el));
  document.querySelectorAll(".fade-sequence").forEach((el) => observer.observe(el));
  document.querySelectorAll(".card-fade").forEach((el) => observer.observe(el));
</script>

<style>
  .flip-card {
    perspective: 1000px;
    height: auto;
  }

  .flip-card-inner {
    position: relative;
    width: 100%;
    transition: transform 0.8s;
    transform-style: preserve-3d;
  }

  .flip-card-inner.show {
    transform: rotateY(360deg);
  }

  .flip-card-front {
    position: relative;
    width: 100%;
    backface-visibility: hidden;
  }

  .fade-sequence {
    opacity: 0;
    transform: translateX(-50px);
    transition: all 0.5s ease-out;
    transition-delay: var(--delay);
  }

  .fade-sequence.show {
    opacity: 1;
    transform: translateX(0);
  }

  .card-fade {
    opacity: 0;
    transform: translateX(-50px);
    transition: all 0.5s ease-out;
    transition-delay: var(--delay, 0ms);
  }

  .card-fade.show {
    opacity: 1;
    transform: translateX(0);
  }
</style>
